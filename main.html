<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Password Strength Checker JavaScript</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://use.fontawesome.com/e8e84223ed.js"></script>
</head>

<body>
  <div class="container">
    <header>Password Strength Indicator <br>in HTML CSS & JavaScript</header>
    <form action="#">
      <div class="field">
        <input onkeyup="trigger()" type="password" placeholder="Type password">
        <span class="showBtn">SHOW</span>
      </div>
      <div class="indicator">
        <span class="weak"></span>
        <span class="medium"></span>
        <span class="strong"></span>
      </div>
      <div class="text"></div>
    </form>
  </div>
  <div class="policy-container">
    <div class="policy-one">
      <h1>POLICY 1</h1>
      <div class="container">
        <h2>Password Generator</h2>
        <div class="result-container">
          <span class='field' id="result"></span>
          <button class="btn" id="clipboard">
            <i class="fa-solid fa-clipboard"></i>
          </button>
        </div>
        <div class="settings">
          <div class="setting">
            <label>Password length</label>
            <input type="number" id="length" min='4' max='20' value='6' />
          </div>
          <div class="setting">
            <label>Include uppercase letters</label>
            <input type="checkbox" id="uppercase" checked />
          </div>
          <div class="setting">
            <label>Include lowercase letters</label>
            <input type="checkbox" id="lowercase" checked />
          </div>
          <div class="setting">
            <label>Include numbers</label>
            <input type="checkbox" id="numbers" checked />
          </div>
          <div class="setting">
            <label>Include symbols</label>
            <input type="checkbox" id="symbols" checked />
          </div>
        </div>
        <button class="btn btn-large" id="generate">
          Generate password
        </button>
      </div>

    </div>
    <!-- end of policy 1 -->
    <!-- start of Policy 2 -->
    <div class="policy-two">
      <h1>POLICY 2</h1>
      <div class="container">
        <h2>Three Word Password Generator</h2>
        <div class="result-container">
          <span class="field" id="result-2"></span>
          <button class="btn" id="clipboard2">
            <i class="far fa-clipboard"></i>
          </button>
        </div>
        <button class="btn btn-large" id="generate-2">
          Generate three word password
        </button>
      </div>

    </div>
    <!-- end of policy 2 -->
    <!-- start of policy 3 -->
    <div class="policy-three">
      <h1>POLICY 3</h1>
      <div class="container">
        <h2>Password Strengthener</h2>
        <form action="#">
          <div class="field">
            <input onkeyup="triggerThree()" id="input" type="password" placeholder="Enter weak password">
            <span class="showBtn3">SHOW</span>
          </div>
        </form>
        <div class="result-container">
          <span class="field" id="result-3"></span>
          <button class="btn" id="clipboard3">
            <i class="far fa-clipboard"></i>
          </button>
        </div>
        <button class="btn btn-large" id="generate-3">
          Generate Stronger Password
        </button>
      </div>

    </div>
    <!-- end of policy 3 -->
  </div>
  <script>
    // Password Strength Indicator
    const indicator = document.querySelector(".indicator");
    const input = document.querySelector("input");
    const weak = document.querySelector(".weak");
    const medium = document.querySelector(".medium");
    const strong = document.querySelector(".strong");
    const text = document.querySelector(".text");
    const showBtn = document.querySelector(".showBtn");
    let regExpWeak = /[a-z]/;
    let regExpMedium = /\d+/;
    let regExpIntermediate = /[A-Z\s]+/;
    let regExpStrong = /.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/;
    function trigger() {
      if (input.value != "") {
        indicator.style.display = "block";
        indicator.style.display = "flex";
        if (input.value.length <= 3 && (input.value.match(regExpWeak) || input.value.match(regExpMedium) || input.value.match(regExpStrong))) no = 1;
        if (input.value.length >= 6 && ((input.value.match(regExpWeak) && input.value.match(regExpMedium)) || (input.value.match(regExpMedium) && input.value.match(regExpStrong)) || (input.value.match(regExpWeak) && input.value.match(regExpStrong)))) no = 2;
        if (input.value.length >= 6 && input.value.match(regExpWeak) && input.value.match(regExpMedium) && input.value.match(regExpStrong)) no = 3;
        //  if(input.value.length <= 3 || input.value.length >= 4 && (input.value.match(regExpWeak) || input.value.match(regExpMedium) || input.value.match(regExpStrong)))no=1;
        //  if(input.value.length >= 6 && ((input.value.match(regExpWeak) && input.value.match(regExpMedium)) || (input.value.match(regExpMedium) && input.value.match(regExpStrong)) || (input.value.match(regExpWeak) && input.value.match(regExpStrong))))no=2;
        //  if(input.value.length >= 6 && (input.value.match(regExpWeak) && input.value.match(regExpMedium) && input.value.match(regExpStrong)))no=3;
        if (no == 1) {
          weak.classList.add("active");
          text.style.display = "block";
          text.textContent = "Your password is too week";
          text.classList.add("weak");
        }
        if (no == 2) {
          weak.classList.add("active");
          medium.classList.add("active");
          text.textContent = "Your password is medium";
          text.classList.add("medium");
        } else {
          medium.classList.remove("active");
          text.classList.remove("medium");
        }
        if (no == 3) {
          weak.classList.add("active");
          medium.classList.add("active");
          strong.classList.add("active");
          text.textContent = "Your password is strong";
          text.classList.add("strong");
        } else {
          strong.classList.remove("active");
          text.classList.remove("strong");
        }
        showBtn.style.display = "block";
        showBtn.onclick = function () {
          if (input.type == "password") {
            input.type = "text";
            showBtn.textContent = "HIDE";
            showBtn.style.color = "#23ad5c";
          } else {
            input.type = "password";
            showBtn.textContent = "SHOW";
            showBtn.style.color = "#000";
          }
        }
      } else {
        indicator.style.display = "none";
        text.style.display = "none";
        showBtn.style.display = "none";
      }
    }

    //  ////////////POLICY 1 JS/////////////////
    const resultEl = document.getElementById('result');
    const lengthEl = document.getElementById('length');
    const uppercaseEl = document.getElementById('uppercase');
    const lowercaseEl = document.getElementById('lowercase');
    const numbersEl = document.getElementById('numbers');
    const symbolsEl = document.getElementById('symbols');
    const generateEl = document.getElementById('generate');
    const clipboard = document.getElementById('clipboard');



    const randomFunc = {
      lower: getRandomLower,
      upper: getRandomUpper,
      number: getRandomNumber,
      symbol: getRandomSymbol
    }

    clipboard.addEventListener('click', () => {
      const textarea = document.createElement('textarea');
      const password = resultEl.innerText;

      if (!password) { return; }

      textarea.value = password;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      textarea.remove();
      alert('Password copied to clipboard');
    });

    generateEl.addEventListener('click', () => {
      const length = +lengthEl.value;
      const hasLower = lowercaseEl.checked;
      const hasUpper = uppercaseEl.checked;
      const hasNumber = numbersEl.checked;
      const hasSymbol = symbolsEl.checked;

      resultEl.innerText = generatePassword(hasLower, hasUpper, hasNumber, hasSymbol, length);
    });

    function generatePassword(lower, upper, number, symbol, length) {
      let generatedPassword = '';
      const typesCount = lower + upper + number + symbol;
      const typesArr = [{ lower }, { upper }, { number }, { symbol }].filter(item => Object.values(item)[0]);

      // No selected type
      if (typesCount === 0) {
        return '';
      }

      // create a loop
      for (let i = 0; i < length; i += typesCount) {
        typesArr.forEach(type => {
          const funcName = Object.keys(type)[0];
          generatedPassword += randomFunc[funcName]();
        });
      }

      const finalPassword = generatedPassword.slice(0, length);

      return finalPassword;
    }

    function getRandomLower() {
      return String.fromCharCode(Math.floor(Math.random() * 26) + 97);
    }

    function getRandomUpper() {
      return String.fromCharCode(Math.floor(Math.random() * 26) + 65);
    }

    function getRandomNumber() {
      return +String.fromCharCode(Math.floor(Math.random() * 10) + 48);
    }

    function getRandomSymbol() {
      const symbols = '!@#$%^&*(){}[]=<>/,.'
      return symbols[Math.floor(Math.random() * symbols.length)];
    }

    // ////// Policy 2 JS
    const result2EL = document.getElementById('result-2');
    const generate2EL = document.getElementById('generate-2');
    const clipboard2 = document.getElementById('clipboard2');

    wordArr = ['Melon', 'Frog', 'Giraffe', 'White', 'Red', 'Bread']

    clipboard2.addEventListener('click', () => {
      const textarea = document.createElement('textarea');
      const password = result2EL.innerText;

      if (!password) { return; }

      textarea.value = password;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      textarea.remove();
      alert('Password copied to clipboard');
    });

    function generateThreeWord() {
      separator = getRandomSymbol()
      result = getFirstWord() + separator + getSecondWord() + separator + getThirdWord() + getRandomNumber();
      return result;
    }


    function getFirstWord() {
      return wordArr[Math.floor(Math.random() * wordArr.length)]
    }

    function getSecondWord() {
      return wordArr[Math.floor(Math.random() * wordArr.length)]
    }

    function getThirdWord() {
      return wordArr[Math.floor(Math.random() * wordArr.length)]
    }

    generate2EL.addEventListener('click', () => {
      result2EL.innerText = generateThreeWord();
    })


    // Policy 3 JS
    const result3EL = document.getElementById("result-3");
    const generate3EL = document.getElementById("generate-3");
    const clipboard3 = document.getElementById('clipboard3');
    const showBtn3 = document.querySelector(".showBtn3");

    clipboard3.addEventListener('click', () => {
      const textarea = document.createElement('textarea');
      const password = result3EL.innerText;
      console.log(password)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         

      if (!password) { return; }

      textarea.value = password;
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      textarea.remove();
      alert('Password copied to clipboard');
    });

    weakpassword = ''
    function triggerThree() {
      console.log('triggerThree')
      if (input.value != "") {
        console.log(weakpassword)
        showBtn3.style.display = "block";
        showBtn3.onclick = function () {
          if (input.type == "password") {
            input.type = "text";
            showBtn.textContent = "HIDE";
            showBtn.style.color = "#23ad5c";
          } else {
            input.type = "password";
            showBtn.textContent = "SHOW";
            showBtn.style.color = "#000";
          }
        }
      } else {
        text.style.display = "none";
        showBtn.style.display = "none";
      }
    }
    // 

    function generateStrongPassword(weakpassword) {
      index = Math.floor(Math.random() * weakpassword.length - 1)
      separator = getRandomSymbol()
      mutIndex1 = weakpassword.replace(weakpassword.charAt(index + 0), weakpassword.charAt(index + 0).toUpperCase())
      mutIndex = mutIndex1.replace(mutIndex1.charAt(index + 1), mutIndex1.charAt(index + 1).toUpperCase())
      strongPassword = mutIndex.split('').map(item => separator + item).join('')

      return strongPassword;
    }

    generate3EL.addEventListener("click", () => {
      const weakpassword = document.getElementById("input").value;
      result3EL.innerText = generateStrongPassword(weakpassword);
    })

  </script>
</body>

</html>